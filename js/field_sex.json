{
  "$schema": "https://vega.github.io/schema/vega-lite/v5.json",
  "title": {"text": "Field of Study by Sex (%)", "anchor": "start"},
  "width": 760,
  "height": {"step": 28},
  "data": {
    "url": "https://raw.githubusercontent.com/HaiNam2312/DataViz2/refs/heads/main/data/field_of_study_sex.csv",
    "format": {"type": "csv"}
  },
  "layer": [
    {
      "transform": [{"fold": ["Male", "Female"], "as": ["Sex", "Value"]}],
      "mark": {"type": "bar", "cornerRadiusEnd": 2},
      "encoding": {
        "y": {
          "field": "Field",
          "type": "nominal",
          "sort": {"field": "Persons", "order": "descending"},
          "title": "",
          "axis": {"labelLimit": 380}
        },
        "yOffset": {"field": "Sex"},
        "x": {
          "field": "Value",
          "type": "quantitative",
          "title": "Percentage (%)",
          "axis": {"format": ".1f"}
        },
        "color": {"field": "Sex", "type": "nominal", "title": "Sex", "scale": {"scheme": "set2"}},
        "tooltip": [
          {"field": "Field", "title": "Field"},
          {"field": "Sex", "title": "Sex"},
          {"field": "Value", "type": "quantitative", "format": ".1f", "title": "Value (%)"}
        ]
      }
    },
    {
      "transform": [{ "fold": ["Male", "Female"], "as": ["Sex", "_"] }],
      "mark": {"type": "tick", "size": 22, "thickness": 2, "color": "black"},
      "encoding": {
        "y": {"field": "Field", "type": "nominal"},
        "xOffset": {"field": "Sex"},          
        "x": {"field": "Persons", "type": "quantitative"},
        "tooltip": [
          {"field": "Field", "title": "Field"},
          {"field": "Persons", "type": "quantitative", "format": ".1f", "title": "Persons (%)"}
        ]
      }
    }
  ],
  "config": {
    "view": {"stroke": null},
    "legend": {"labelFontSize": 11, "titleFontSize": 12}
  }
}
