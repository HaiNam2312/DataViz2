<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>Data Visualization 2 - FIT3179</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <!-- Vega libs -->
  <script src="https://cdn.jsdelivr.net/npm/vega@5"></script>
  <script src="https://cdn.jsdelivr.net/npm/vega-lite@5"></script>
  <script src="https://cdn.jsdelivr.net/npm/vega-embed@6"></script>

  <!-- Minimal, readable styling -->
  <style>
    :root{
      --fg:#0f172a; --muted:#64748b; --border:#e2e8f0; --card:#ffffff; --maxw:1100px;
    }
    html,body{margin:0;padding:0;background:#fafafa;color:var(--fg);font-family:system-ui,-apple-system,Segoe UI,Roboto,Inter,Arial,sans-serif;line-height:1.55}
    header{border-bottom:1px solid var(--border);background:#fff}
    header .wrap{max-width:var(--maxw);margin:0 auto;padding:28px 16px}
    h1{margin:0 0 6px;font-size:28px}
    .sub{margin:0;color:var(--muted)}

    /* Layout: cards have even width; text never affects width */
    main{
      max-width:var(--maxw);
      margin:0 auto;
      padding:18px 16px;
      display:grid;
      gap:22px;
    }
    .grid-2{
      display:grid;
      gap:22px;
      grid-template-columns: repeat(auto-fit, minmax(420px, 1fr)); /* even card widths */
    }
    section.card{
      background:var(--card);
      border:1px solid var(--border);
      border-radius:14px;
      padding:16px 16px 12px;
      display:flex;
      flex-direction:column;
      inline-size:100%;
      overflow:hidden;
    }
    /* Option A: make selected cards span full width */
    .card.wide{ grid-column: 1 / -1; }

    /* Ensure embedded SVG charts scale to container */
    .vega-embed svg{ width:100% !important; height:auto !important; }

    section.card h2{margin:4px 0 6px;font-size:20px}
    figure{margin:8px 0 0}
    figcaption{font-size:13px;color:var(--muted);margin-top:8px}

    /* Text wraps; long lines won’t stretch cards */
    p.context{
      margin:10px 0 0;
      color:#334155;
      overflow-wrap:anywhere;
      word-break:normal;
      hyphens:auto;
    }

    footer{max-width:var(--maxw);margin:0 auto;padding:20px 16px 40px;color:var(--muted)}
    a{color:#0ea5e9;text-decoration:none} a:hover{text-decoration:underline}
  </style>
</head>
<body>
  <header>
    <div class="wrap">
      <h1>Study Engagement & Gender in Australia</h1>
      <p class="sub">Exploring participation by sex, age, state and field of study. Short takeaways under each chart guide the story.</p>
    </div>
  </header>

  <main>

    <!-- 1. Australia overview by sex -->
    <section class="card">
      <h2>Overall study engagement by sex (Australia)</h2>
      <figure>
        <div id="aesex"></div>
        <figcaption>National totals. Hover for exact values.</figcaption>
      </figure>
      <p class="context">Females study more than males at the national level. This baseline pattern appears again in most breakdowns below; the gap size then shifts depending on age, location and field of study.</p>
    </section>

    <!-- 2. Age × sex -->
    <section class="card">
      <h2>Participation by age group and sex</h2>
      <figure>
        <div id="aeasex"></div>
        <figcaption>Each point/segment represents an age band by sex.</figcaption>
      </figure>
      <p class="context">The difference isn’t uniform across ages. Participation is highest in study-intensive years (15–24), where female rates typically lead; later ages narrow the gap slightly, suggesting re-entry and upskilling, but females commonly remain ahead.</p>
    </section>

    <!-- 3 & 4: State comparisons -->
    <div class="grid-2">
      <section class="card wide">
        <h2>State gaps: Male vs Female (dumbbell)</h2>
        <figure>
          <div id="dumbell"></div>
          <figcaption>Longer lines indicate larger gaps.</figcaption>
        </figure>
        <p class="context">All states show female &gt; male participation. The gap is largest in Queensland (+2.7 pts; 13.8% ♂ vs 16.5% ♀) and smallest in the Northern Territory (+0.7). ACT sits at the top for both sexes (≈16.7% ♂; 19.1% ♀), while Tasmania is lowest (≈12.1% ♂; 14.5% ♀).</p>
      </section>

      <!-- AU choropleth: FULL-WIDTH CARD -->
      <section class="card wide">
        <h2>Choropleth: study engagement by state (female)</h2>
        <figure>
          <div id="sssc"></div>
          <figcaption>Dark = higher participation. Hover for details.</figcaption>
        </figure>
        <p class="context">Female participation concentrates in the ACT (~19.1%), followed by NSW/VIC/WA (~17–18%). Queensland and the NT sit mid-pack, and Tasmania is lowest (~14.5%). The spatial pattern aligns with the state gaps above.</p>
      </section>
    </div>

    <!-- 5. Field of study split -->
    <section class="card">
      <h2>Field of study by sex</h2>
      <figure>
        <div id="field"></div>
        <figcaption>Sorted by overall participation (Persons). The short line across each bar marks the field’s overall rate.</figcaption>
      </figure>
      <p class="context">Field choice drives the sharpest splits. Engineering (20.0% ♂ vs 3.1% ♀) and IT (8.6% ♂ vs 2.3% ♀) skew male; Health (21.0% ♀ vs 8.2% ♂) and Education (11.0% ♀ vs 3.9% ♂) skew female. Management &amp; Commerce sits near parity (17.9% ♂; 17.6% ♀), and Agriculture is balanced (1.7% vs 1.7%).</p>
    </section>

    <!-- 6 & 7: Global context -->
    <div class="grid-2">
      <!-- GGI WORLD MAP: FULL-WIDTH CARD -->
      <section class="card wide">
        <h2>Global Gender Gap Index (context)</h2>
        <figure>
          <div id="ggi"></div>
          <figcaption>Composite index—contextual, not directly comparable to participation rates.</figcaption>
        </figure>
        <p class="context">Countries with narrower gender gaps in education and the economy tend to show more balanced study pipelines. Australia performs well overall, yet the field-level splits above show where progress is uneven.</p>
      </section>

      <section class="card wide">
        <h2>Women in STEM (context)</h2>
        <figure>
          <div id="wis"></div>
          <figcaption>Share of women in STEM areas (selected year).</figcaption>
        </figure>
        <p class="context">STEM remains the pinch point. The lower female share mirrors the field chart: IT and Engineering are male-leaning, while Health and Education are female-leaning. Strengthening STEM pathways is the lever most likely to narrow the overall gap.</p>
      </section>
    </div>

  </main>

  <footer>
    <p><strong>Data & Methods.</strong> Australian participation data from your curated CSVs (see repo). Global charts reference public sources linked in each spec. Rates shown are percentages; minor rounding may occur. All visuals built with Vega-Lite.</p>
    <p><strong>Sources.</strong> See JSON specs in the repository for links to original datasets. Built for FIT3179 – Data Visualisation 2.</p>
  </footer>

  <script>
    vegaEmbed("#aesex", "https://raw.githubusercontent.com/HaiNam2312/DataViz2/main/js/au_engage_sex.json", { mode: "vega-lite", renderer: "svg", actions: false }).catch(console.error);
    vegaEmbed("#aeasex", "https://raw.githubusercontent.com/HaiNam2312/DataViz2/main/js/au_engage_age_sex.json", { mode: "vega-lite", renderer: "svg", actions: false }).catch(console.error);
    vegaEmbed("#dumbell", "https://raw.githubusercontent.com/HaiNam2312/DataViz2/main/js/dumbell_study_state.json", { mode: "vega-lite", renderer: "svg", actions: false }).catch(console.error);
    vegaEmbed("#field", "https://raw.githubusercontent.com/HaiNam2312/DataViz2/main/js/field_sex.json", { mode: "vega-lite", renderer: "svg", actions: false }).catch(console.error);
    vegaEmbed("#wis", "https://raw.githubusercontent.com/HaiNam2312/DataViz2/main/js/women_in_stem_2020.json", { mode: "vega-lite", renderer: "svg", actions: false }).catch(console.error);

    vegaEmbed("#sssc", "https://raw.githubusercontent.com/HaiNam2312/DataViz2/main/js/study_sex_state_choro_f.json",
      { mode: "vega-lite", renderer: "svg", actions: false }).catch(console.error);

    vegaEmbed("#ggi", "https://raw.githubusercontent.com/HaiNam2312/DataViz2/main/js/gender_gap_index_wwmap.json",
      { mode: "vega-lite", renderer: "svg", actions: false }).catch(console.error);
  </script>
</body>
</html>
